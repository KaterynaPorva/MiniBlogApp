@startuml MiniBlogApp_Activity

title Діаграма діяльності: Процес створення та публікації допису

' Налаштування стилю для умов
skinparam conditionStyle inside

|Користувач|
start
:Натискає кнопку "Створити допис";

|Система (MiniBlogApp)|
if (Користувач авторизований?) then (Ні)
    :Перенаправлення на сторінку входу;
    
    |Користувач|
    :Вводить логін та пароль;
    
    |Система (MiniBlogApp)|
    if (Дані правильні?) then (Ні)
        :Повідомлення про помилку авторизації;
        stop
    else (Так)
        :Створення сесії користувача;
    endif
else (Так)
endif

|Користувач|
:Відкривається форма нового допису;
:Заповнює поля "Заголовок" та "Текст";
:Натискає "Опублікувати";

|Система (MiniBlogApp)|
:Перевірка валідності даних (ModelState);

if (Дані валідні?) then (Ні)
    :Повернення форми з підказками про помилки;
    stop
else (Так)
    :Створення сутності Post;
    :Збереження допису в базу даних;
    :Редирект на сторінку створеного допису;
endif

|Користувач|
:Переглядає опублікований допис;

stop

@enduml